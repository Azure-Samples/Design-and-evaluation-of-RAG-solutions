## 7. List of code snippets

| # | Title | Description | Section | Code Snippet |
| --- | --- | --- | --- | --- |
| 1 | Generate synthetic documents | Automatically create HTML documents related a customer's market for testing all the process | 2.1 | [generate-synthetic-documents.ipynb](../2.-preparation-phase-and-document-analysis/2.1.-Generate-synthetic-documents/generate-synthetic-documents.ipynb) |
| 2 | Convert HTML to markdown format | Convert HTML section of documents to markdown with Document Intelligence and stich together to create the document unit | 2.2 | [convert_html_to_markdown.ipynb](../2.-preparation-phase-and-document-analysis/2.2.-Convert-HTML-to-markdown/convert_html_to_markdown.ipynb) |
| 3 | Detect low-value documents: small documents | Report and diagrams analyzing the distribution of number of tokens per document | 2.3 | [length_of_the_documents.ipynb](../2.-preparation-phase-and-document-analysis/2.3.-Length-of-the-documents/calculate_length_of_the_documents.ipynb) |
| 4 | Detect low-value documents: content classification | Classify every content with GPT-4o in three categories: TABLE-ONLY, TABLE-WITH-CONTEXT and TEXT-ONLY | 2.4 | [classify_markdown_content.ipynb](../2.-preparation-phase-and-document-analysis/2.4.-Sub-document-analysis/classify_markdown_content.ipynb) |
| 5 | Detect low-value documents: identify duplicate documents | - Index: After converting the html content to markdown and stich sections, create embedding for every document (with a maximum of 8191 tokens supported by the model) and index in Azure AI Search. - Search duplicates: iterate the list of documents and use vector search to look for duplicates with a 97% of similarity | 4.1 & 2.5 | [create_index_and_index_documents.ipynb](../4.-search-and-retrieval/4.1.-create-index-and-index-documents/create_index_and_index_documents.ipynb) and [find_duplicates.ipynb](../2.-preparation-phase-and-document-analysis/2.5.-Duplicate-documents/find_duplicates.ipynb) |
| 6 | Semantic Chunking with GPT-4o | Analyze every document with a GPT-4T prompt to generate chunks with content semantically similar | 3.1 | [semantic_chunking_with_aoai.ipynb](../3.-chunk-processing/3.1.-Semantic-Chunking-with-GPT-4o/semantic_chunking_with_aoai.ipynb) |
| 7 | Chunking with a maximum tokens size and overlapping | Langchain with tiktoken fix size chunking with overlapping, avoiding chunking if the token number is less or equal to the maximum | 3.2 | [chunking_with_max_tokens.ipynb](../3.-chunk-processing/3.2.-Chunking-with-Langchain-with-max-tokens-and-overlapping/chunking_with_max_tokens.ipynb) |
| 8 | Re-rank chunks retrieved in a search | Analyze in parallel chunks and its associated query with a GPT-3.5T prompt to get the confidence between 0 to 100 than the chunk has context valid to answer the question and get the main part of the chunk that is valid to answer the question | 4.1 & 4.4 | [create_index_and_index_documents.ipynb](../4.-search-and-retrieval/4.1.-create-index-and-index-documents/create_index_and_index_documents.ipynb) and [rerank_chunks_and_generate_answer.ipynb](../4.-search-and-retrieval/4.4.-Search-results-re-ranking/rerank_chunks_and_generate_answer.ipynb) |
| 9 | Generation of Synthetic Questions and Answers pairs from documentation | Process every document in markdown format and generate a question and answer pairs with GPT-4o | 5.1 | [search_and_answer_generation_tests.ipynb](../5.-testing-and-evaluation/5.1.-Testing-search-results/search_and_answer_generation_tests.ipynb) |
| 10 | Generation of Synthetic Questions and Answers pairs from documentation | Process every document in markdown format and generate a question and answer pairs with GPT-4o | 5.2 | [generate_synthetic_qa_pairs.ipynb](../5.-testing-and-evaluation/5.2.-Automatic-generation-of-synthetic-QA-pairs/generate_synthetic_qa_pairs.ipynb) |
| 11 | Evaluation of generated answers quality compared with ground truth (expected answers) integrated in AI Studio | Analyze every generated answer by the RAG solution and compare them with the expected answers using a GPT-4To with prompty and prompt flow integrated in AI Studio, classifying the answers in four categories: 0: not alligned with the expected answer, 1: alligned but lack of info, 2: perfect alligned, and 3: provides additional info | 5.3 | [evaluate_answer.ipynb](../5.-testing-and-evaluation/5.3.-Evaluate-answer-quality/evaluate_answer.ipynb) |
| 12 | Test of the end-to-end process | Test the complete process in an integrated way: 1. Convert HTML files to markdown format. 2. hunk markdown content with the maximum number of tokens specified. 3. reate the index and upload the chunks. 4. est the search and answer generation creating the Excel files with the results of answers | 5.4 | [end_to_end_process.ipynb](../5.-testing-and-evaluation/5.4.-Testing-the-end-to-end-process/end_to_end_process.ipynb) |
